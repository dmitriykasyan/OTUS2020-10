# Архитектура сетей

## Описание стенда и задание

Планируемая архитектура

построить следующую архитектуру

Сеть office1

    192.168.2.0/26 - dev
    192.168.2.64/26 - test servers
    192.168.2.128/26 - managers
    192.168.2.192/26 - office hardware

Сеть office2

    192.168.1.0/25 - dev
    192.168.1.128/26 - test servers
    192.168.1.192/26 - office hardware

Сеть central

    192.168.0.0/28 - directors
    192.168.0.32/28 - office hardware
    192.168.0.64/26 - wifi

Office1 ---\
                   -----> Central --IRouter --> internet
Office2----/

Итого должны получится следующие сервера

    inetRouter
    centralRouter
    office1Router
    office2Router
    centralServer
    office1Server
    office2Server

Теоретическая часть

    Посчитать сколько узлов в каждой подсети, включая свободные
    Указать broadcast адрес для каждой подсети
    проверить нет ли ошибок при разбиении
    Найти свободные подсети

Практическая часть

    Соединить офисы в сеть согласно схеме и настроить роутинг
    Все сервера и роутеры должны ходить в инет черз inetRouter
    Все сервера должны видеть друг друга
    у всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
    при нехватке сетевых интерфейсов добавить по несколько адресов на интерфейс

Критерии оценки:

4 - сделана хотя бы часть 5 - все сделано
Рекомендуем сдать до: 01.03.2021

## Выполнение работы

### Анализ сетей

Проведем анализ сетей:

Сеть gateway  
определим количество хостов: 2 <sup>n</sup> -2, где n=32-префикс маски

    сеть: 192.168.255.0/30
    адрес: сети 192.168.255.0
    количество хостов: 2^(32-30)-2 = 2
    broadcast: 192.168.255.4

Сеть central

    192.168.0.0/28 - directors

    адрес: сети 192.168.0.0
    количество хостов: 2^(32-28)-2 = 16
    broadcast: 192.168.255.16

    192.168.0.32/28 - office hardware

    адрес: сети 192.168.0.32
    количество хостов: 2^(32-28)-2 = 16
    broadcast: 192.168.255.47

    192.168.0.64/26 - wifi

    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

Сеть office1

    192.168.2.0/26 - dev

    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

    192.168.2.64/26 - test servers

    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

    192.168.2.128/26 - managers
    
    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

    192.168.2.192/26 - office hardware
    
    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

Сеть office2

    192.168.1.0/25 - dev

    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

    192.168.1.128/26 - test servers
    
    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127
    
    192.168.1.192/26 - office hardware

    сеть: 192.168.0.64/26
    адрес: сети 192.168.0.64
    количество хостов: 2^(32-26)-2 = 62
    broadcast: 192.168.255.127

В данной примере имеем странную ситуацию, в том что сеть `gateway` является младшей в подсети 192.168.0.0/16  
Для работы статического роутинга необходимо прописать "обратный" маршрут на `inetRouter` для всей сети `192.168.0.0/16 dev eth1`

настройка аутентификации.
Настройка sshd на centralRouter, centralServer
